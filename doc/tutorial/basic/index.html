<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="scala-js-website/assets/img/scala-js-logo-32.png">
    <link rel="canonical" href="https://www.scala-js.org/doc/tutorial/basic/index.html">

    <title> Basic tutorial - Scala.js</title>

    <meta property="og:title" content="Basic tutorial" /><meta property="og:type" content="website" /><meta property="og:description" content="Build robust front-end web applications in Scala with Scala.js" /><meta property="og:site_name" content="Scala.js" /><meta property="og:image" content="https://www.scala-js.org/assets/img/scala-js-logo-256.png" />


    <link type="text/css" rel="stylesheet" href="scala-js-website/assets/bundle-91bdfeed9789c079530f8a6a05da4b23fd93b28c59e0b7729fc9c2199700d3da.css">

    <script>
      var onloadFunctions = [];
    </script>
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="scala-js-website/"><img width="120" alt="Scala.js" src="scala-js-website/assets/img/scala-js-site-logo.svg"></a>
    </div>
    <div class="navbar-collapse collapse navbar-right">
      <ul class="nav navbar-nav">
        <li class="active"><a href="scala-js-website/doc/">DOCUMENTATION</a></li>
        <li ><a href="scala-js-website/libraries/">LIBRARIES</a></li>
        <li ><a href="scala-js-website/community/">COMMUNITY</a></li>
        <li ><a href="scala-js-website/news/">NEWS</a></li>
        <li><a href="#" id="search-icon"><i style="font-size: 20px" class="fa fa-search"></i></a></li>
      </ul>
    </div>
  </div>
</div>
<div id="search-view" class="container">
    <div id="search-box">
            <input type="text" class="form-control" placeholder="Search" id="search-term">
        <div id="search-results" class="container"></div>
    </div>
</div>
<div id="wrap">
    <div id="main">
        <div id="blue">
    <div class="container">
        <div class="row">
            <h3>Basic tutorial</h3>
        </div><!-- /row -->
    </div> <!-- /container -->
</div><!-- /blue -->

<div class="container mtb">
    <div class="row">
        <div class="col-md-9">
            <p>This step-by-step tutorial where we start with the setup of a Scala.js sbt project and end up having some user interaction and unit testing. The code created in this tutorial is available with one commit per step in the <a href="https://github.com/scala-js/scalajs-tutorial">scalajs-tutorial</a> repository on GitHub.</p>

<p><strong>Note for Scala.js 1.x users:</strong> The present tutorial is targeted at the latest stable version of Scala.js, i.e., 0.6.26.
Some details may vary if you try to follow along with Scala.js 1.0.0-M6.
Please consult relevant pages of the documentation for any discrepancies.</p>

<h2 id="-step-0-prerequisites"><a name="prerequisites"></a> Step 0: Prerequisites</h2>

<p>To go through this tutorial, you will need to <a href="http://www.scala-sbt.org/0.13/tutorial/Setup.html">download &amp; install sbt</a> (&gt;= 0.13.0). Note that no prior sbt knowledge (only a working installation) is required to follow the tutorial.</p>

<p>You will also need to <a href="https://nodejs.org/en/download/">download &amp; install Node.js</a>.</p>

<h2 id="-step-1-setup"><a name="setup"></a> Step 1: Setup</h2>

<p>First create a new folder where your sbt project will go.</p>

<h3 id="sbt-setup">sbt Setup</h3>

<p>To setup Scala.js in a new sbt project, we need to do two things:</p>

<ol>
  <li>Add the Scala.js sbt plugin to the build</li>
  <li>Enable the plugin in the project</li>
</ol>

<p>Adding the Scala.js sbt plugin is a one-liner in <code class="highlighter-rouge">project/plugins.sbt</code> (all file names we write in this tutorial are relative to the project root):</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="n">addSbtPlugin</span><span class="o">(</span><span class="s">"org.scala-js"</span> <span class="o">%</span> <span class="s">"sbt-scalajs"</span> <span class="o">%</span> <span class="s">"0.6.26"</span><span class="o">)</span></code></pre></figure>

<p>We also setup basic project settings and enable this plugin in the sbt build file (<code class="highlighter-rouge">build.sbt</code>, in the project root directory):</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="n">enablePlugins</span><span class="o">(</span><span class="nc">ScalaJSPlugin</span><span class="o">)</span>

<span class="n">name</span> <span class="o">:=</span> <span class="s">"Scala.js Tutorial"</span>
<span class="n">scalaVersion</span> <span class="o">:=</span> <span class="s">"2.12.6"</span> <span class="c1">// or any other Scala version &gt;= 2.10.2
</span>
<span class="c1">// This is an application with a main method
</span><span class="n">scalaJSUseMainModuleInitializer</span> <span class="o">:=</span> <span class="kc">true</span></code></pre></figure>

<p>Last, we need a <code class="highlighter-rouge">project/build.properties</code> to specify the sbt version (&gt;= 0.13.17):</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="n">sbt</span><span class="o">.</span><span class="n">version</span><span class="k">=</span><span class="mf">0.13</span><span class="o">.</span><span class="mi">17</span></code></pre></figure>

<p>That is all we need to configure the build.</p>

<p>If at this point you prefer to use Eclipse or IDEA as your IDE, you may use <a href="https://github.com/typesafehub/sbteclipse/wiki/Using-sbteclipse">sbteclipse</a> to generate an Eclipse project, or import the sbt build from IDEA. Note that for compiling and running your application, you will still need to use sbt from the command line.</p>

<h3 id="helloworld-application">HelloWorld application</h3>

<p>For starters, we add a very simple <code class="highlighter-rouge">TutorialApp</code> in the <code class="highlighter-rouge">tutorial.webapp</code> package. Create the file <code class="highlighter-rouge">src/main/scala/tutorial/webapp/TutorialApp.scala</code>:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">package</span> <span class="nn">tutorial.webapp</span>

<span class="k">object</span> <span class="nc">TutorialApp</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">main</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"Hello world!"</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>As you expect, this will simply print “HelloWorld” when run. To run this, simply launch <code class="highlighter-rouge">sbt</code> and invoke the <code class="highlighter-rouge">run</code> task:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sbt
&gt; run
[info] Compiling 1 Scala source to (...)/scala-js-tutorial/target/scala-2.12/classes...
[info] Fast optimizing (...)/scalajs-tutorial/target/scala-2.12/scala-js-tutorial-fastopt.js
[info] Running tutorial.webapp.TutorialApp
Hello world!
[success] (...)
</code></pre></div></div>

<p>Congratulations! You have successfully compiled and run your first Scala.js application. The code is actually run by a JavaScript interpreter. If you do not believe this (it happens to us occasionally), you can use the <code class="highlighter-rouge">last</code> command in sbt:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; last
(...)
[info] Running tutorial.webapp.TutorialApp
[debug] with JSEnv ExternalJSEnv for Node.js
[debug] Starting process: node
[success] (...)
</code></pre></div></div>

<p>So your code has actually been executed by Node.js.</p>

<p><strong>Source maps in Node.js</strong>: To get your stack traces resolved on Node.js, you will have to install the <code class="highlighter-rouge">source-map-support</code> package.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install source-map-support
</code></pre></div></div>

<h2 id="-step-2-integrating-with-html"><a name="integrating-html"></a> Step 2: Integrating with HTML</h2>

<p>Now that we have a simple JavaScript application, we would like to use it in an HTML page. To do this, we need two steps:</p>

<ol>
  <li>Generate a single JavaScript file out of our compiled code</li>
  <li>Create an HTML page which includes that file</li>
</ol>

<h3 id="generate-javascript">Generate JavaScript</h3>

<p>To generate a single JavaScript file using sbt, just use the <code class="highlighter-rouge">fastOptJS</code> task:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; fastOptJS
[info] Fast optimizing (...)/scala-js-tutorial/target/scala-2.12/scala-js-tutorial-fastopt.js
[success] (...)
</code></pre></div></div>

<p>This will perform some fast optimizations and generate the <code class="highlighter-rouge">target/scala-2.12/scala-js-tutorial-fastopt.js</code> file containing the JavaScript code.</p>

<p>(It is possible that the <code class="highlighter-rouge">[info]</code> does not appear, if you have just run the program and not made any change to it.)</p>

<h3 id="create-the-html-page">Create the HTML Page</h3>

<p>To load and launch the created JavaScript, you will need an HTML file. Create the file <code class="highlighter-rouge">scalajs-tutorial-fastopt.html</code> (or whatever name you prefer, for example <code class="highlighter-rouge">index-dev.html</code>) in the project root with the following content. We will go in the details right after.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>The Scala.js Tutorial<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="c">&lt;!-- Include Scala.js compiled code --&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"./target/scala-2.12/scala-js-tutorial-fastopt.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p>The script tag simply includes the generated code (attention, you might need to adapt the Scala version from <code class="highlighter-rouge">2.12</code> to <code class="highlighter-rouge">2.10</code> or <code class="highlighter-rouge">2.11</code> here if you are using Scala 2.10.x or Scala 2.11.x instead of 2.12.x).</p>

<p>Since we have set <code class="highlighter-rouge">scalaJSUseMainModuleInitializer := true</code> in the build, the <code class="highlighter-rouge">TutorialApp.main(args: Array[String])</code> method is automatically called at the end of the <code class="highlighter-rouge">-fastopt.js</code> file (with an empty array as argument).</p>

<p>If you now open the newly created HTML page in your favorite browser, you will see … nothing. The <code class="highlighter-rouge">println</code> in the <code class="highlighter-rouge">main</code> method goes right to the JavaScript console, which is not shown by default in a browser. However, if you open the JavaScript console (e.g. in Chrome: right click -&gt; Inspect Element -&gt; Console) you can see the HelloWorld message.</p>

<h2 id="-step-3-using-the-dom"><a name="using-dom"></a> Step 3: Using the DOM</h2>

<p>As the last step has shown, running JavaScript inside an HTML page is not particularly useful if you cannot interact with the page.
That’s what the DOM API is for.</p>

<h3 id="adding-the-dom-library">Adding the DOM Library</h3>

<p>To use the DOM, it is best to use the statically typed Scala.js DOM library. To add it to your sbt project, add the following line to your <code class="highlighter-rouge">build.sbt</code>:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"org.scala-js"</span> <span class="o">%%%</span> <span class="s">"scalajs-dom"</span> <span class="o">%</span> <span class="s">"0.9.6"</span></code></pre></figure>

<p>sbt-savvy folks will notice the <code class="highlighter-rouge">%%%</code> instead of the usual <code class="highlighter-rouge">%%</code>. It means we are using a Scala.js library and not a
normal Scala library. Have a look at the <a href="../../doc/project/dependencies.html">Dependencies</a> guide for details. Don’t forget
to reload the build file if sbt is still running:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; reload
[info] Loading global plugins from (...)
[info] Loading project definition from (...)/scala-js-tutorial/project
[info] Set current project to Scala.js Tutorial (in build (...)/scala-js-tutorial/)
</code></pre></div></div>

<p>If you are using an IDE plugin, you will also have to regenerate the project files for autocompletion to work.</p>

<h3 id="using-the-dom-library">Using the DOM Library</h3>

<p>Now that we added the DOM library, let’s adapt our HelloWorld example to add a <code class="highlighter-rouge">&lt;p&gt;</code> tag to the body of the page, rather than printing to the console.</p>

<p>First of all, we import a couple of things:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">import</span> <span class="nn">org.scalajs.dom</span>
<span class="k">import</span> <span class="nn">dom.document</span></code></pre></figure>

<p><code class="highlighter-rouge">dom</code> is the root of the JavaScript DOM and corresponds to the global scope of JavaScript (aka the <code class="highlighter-rouge">window</code> object).
We additionally import <code class="highlighter-rouge">document</code> (which corresponds to <code class="highlighter-rouge">document</code> in JavaScript) for convenience.</p>

<p>We now create a method that allows us to append a <code class="highlighter-rouge">&lt;p&gt;</code> tag with a given text to a given node:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">def</span> <span class="n">appendPar</span><span class="o">(</span><span class="n">targetNode</span><span class="k">:</span> <span class="kt">dom.Node</span><span class="o">,</span> <span class="n">text</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">parNode</span> <span class="k">=</span> <span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="o">(</span><span class="s">"p"</span><span class="o">)</span>
  <span class="k">val</span> <span class="n">textNode</span> <span class="k">=</span> <span class="n">document</span><span class="o">.</span><span class="n">createTextNode</span><span class="o">(</span><span class="n">text</span><span class="o">)</span>
  <span class="n">parNode</span><span class="o">.</span><span class="n">appendChild</span><span class="o">(</span><span class="n">textNode</span><span class="o">)</span>
  <span class="n">targetNode</span><span class="o">.</span><span class="n">appendChild</span><span class="o">(</span><span class="n">parNode</span><span class="o">)</span>
<span class="o">}</span></code></pre></figure>

<p>Replace the call to <code class="highlighter-rouge">println</code> with a call to <code class="highlighter-rouge">appendPar</code> in the <code class="highlighter-rouge">main</code> method:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">def</span> <span class="n">main</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
  <span class="n">appendPar</span><span class="o">(</span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">,</span> <span class="s">"Hello World"</span><span class="o">)</span>
<span class="o">}</span></code></pre></figure>

<h3 id="rebuild-the-javascript">Rebuild the JavaScript</h3>

<p>To rebuild the JavaScript, simply invoke <code class="highlighter-rouge">fastOptJS</code> again:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; fastOptJS
[info] Compiling 1 Scala source to (...)/scala-js-tutorial/target/scala-2.12/classes...
[info] Fast optimizing (...)/scala-js-tutorial/target/scala-2.12/scala-js-tutorial-fastopt.js
[success] (...)
</code></pre></div></div>

<p>As you can see from the log, sbt automatically detects that the sources must be recompiled before fast optimizing.</p>

<p>You can now reload the HTML in your browser and you should see a nice “Hello World” message.</p>

<p>Re-typing <code class="highlighter-rouge">fastOptJS</code> each time you change your source file is cumbersome. Luckily sbt is able to watch your files and recompile as needed:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; ~fastOptJS
[success] (...)
1. Waiting for source changes... (press enter to interrupt)
</code></pre></div></div>

<p>From this point in the tutorial we assume you have an sbt with this command running, so we don’t need to bother with rebuilding each time.</p>

<h2 id="-step-4-reacting-on-user-input"><a name="js-export"></a> Step 4: Reacting on User Input</h2>

<p>This step shows how you can add a button and react to events on it by still just using the DOM (we will use jQuery in the next step). We want to add a button that adds another <code class="highlighter-rouge">&lt;p&gt;</code> tag to the body when it is clicked.</p>

<p>We start by adding a method to <code class="highlighter-rouge">TutorialApp</code> which will be called when the button is clicked:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="nd">@JSExportTopLevel</span><span class="o">(</span><span class="s">"addClickedMessage"</span><span class="o">)</span>
<span class="k">def</span> <span class="n">addClickedMessage</span><span class="o">()</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
  <span class="n">appendPar</span><span class="o">(</span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">,</span> <span class="s">"You clicked the button!"</span><span class="o">)</span>
<span class="o">}</span></code></pre></figure>

<p>You will notice the <code class="highlighter-rouge">@JSExportTopLevel</code> annotation.
It tells the Scala.js compiler to make that method callable as top-level function from JavaScript. We must also import this annotation:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">import</span> <span class="nn">scala.scalajs.js.annotation.JSExportTopLevel</span></code></pre></figure>

<p>To find out more about how to call Scala.js methods from JavaScript, have a look at the <a href="../../doc/interoperability/export-to-javascript.html">Export Scala.js API to
JavaScript</a> guide.</p>

<p>Since we now have a method that is callable from JavaScript, all we have to do is add a button to our HTML and set its
<code class="highlighter-rouge">onclick</code> attribute (make sure to add the button <em>before</em> the <code class="highlighter-rouge">&lt;script&gt;</code> tags):</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"click-me-button"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">onclick=</span><span class="s">"addClickedMessage()"</span><span class="nt">&gt;</span>
  Click me!
<span class="nt">&lt;/button&gt;</span></code></pre></figure>

<p>Reload your HTML page (remember, sbt compiles your code automatically) and try to click the button. It should add a new
paragraph saying “You clicked the button!” each time you click it.</p>

<h2 id="-step-5-using-jquery"><a name="using-jquery"></a> Step 5: Using jQuery</h2>

<p>Larger web applications have a tendency to set up reactions to events in JavaScript rather than specifying attributes.
We will transform our current mini-application to use this paradigm with the help of jQuery. Also we will replace all
usages of the DOM API with jQuery.</p>

<h3 id="depending-on-jquery">Depending on jQuery</h3>

<p>Just like for the DOM, there is a typed library for jQuery available in Scala.js: <a href="https://github.com/jducoeur/jquery-facade">jquery-facade</a>.
Add the following line in your <code class="highlighter-rouge">build.sbt</code> by:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"org.querki"</span> <span class="o">%%%</span> <span class="s">"jquery-facade"</span> <span class="o">%</span> <span class="s">"1.2"</span></code></pre></figure>

<p>Don’t forget to reload the sbt configuration now:</p>

<ol>
  <li>Hit enter to abort the <code class="highlighter-rouge">~fastOptJS</code> command</li>
  <li>Type <code class="highlighter-rouge">reload</code></li>
  <li>Start <code class="highlighter-rouge">~fastOptJS</code> again</li>
</ol>

<p>Again, make sure to update your IDE project files if you are using a plugin.</p>

<h3 id="using-jquery">Using jQuery</h3>

<p>In <code class="highlighter-rouge">TutorialApp.scala</code>, remove the imports for the DOM, and add the import for jQuery:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">import</span> <span class="nn">org.querki.jquery._</span></code></pre></figure>

<p>This allows you to easily access the <code class="highlighter-rouge">$</code> main object of jQuery in your code.</p>

<p>We can now remove <code class="highlighter-rouge">appendPar</code> and replace all calls to it by the simple:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="n">$</span><span class="o">(</span><span class="s">"body"</span><span class="o">).</span><span class="n">append</span><span class="o">(</span><span class="s">"&lt;p&gt;[message]&lt;/p&gt;"</span><span class="o">)</span></code></pre></figure>

<p>Where <code class="highlighter-rouge">[message]</code> is the string originally passed to <code class="highlighter-rouge">appendPar</code>, for example:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="n">$</span><span class="o">(</span><span class="s">"body"</span><span class="o">).</span><span class="n">append</span><span class="o">(</span><span class="s">"&lt;p&gt;Hello World&lt;/p&gt;"</span><span class="o">)</span></code></pre></figure>

<p>If you try to reload your webpage now, it will not work (typically a <code class="highlighter-rouge">TypeError</code> would be reported in the console). The
problem is that we haven’t included the jQuery library itself, which is a plain JavaScript library.</p>

<h3 id="adding-javascript-libraries">Adding JavaScript libraries</h3>

<p>An option is to include <code class="highlighter-rouge">jquery.js</code> from an external source, such as <a href="http://www.jsdelivr.com/">jsDelivr</a>.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"http://cdn.jsdelivr.net/jquery/2.2.1/jquery.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure>

<p>This can easily become very cumbersome, if you depend on multiple libraries. The Scala.js sbt plugin provides a
mechanism for libraries to declare the plain JavaScript libraries they depend on and bundle them in a single file. All
you have to do is activate this and then include the file.</p>

<p>In your <code class="highlighter-rouge">build.sbt</code>, set:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="n">skip</span> <span class="n">in</span> <span class="n">packageJSDependencies</span> <span class="o">:=</span> <span class="kc">false</span>
<span class="n">jsDependencies</span> <span class="o">+=</span>
  <span class="s">"org.webjars"</span> <span class="o">%</span> <span class="s">"jquery"</span> <span class="o">%</span> <span class="s">"2.2.1"</span> <span class="o">/</span> <span class="s">"jquery.js"</span> <span class="n">minified</span> <span class="s">"jquery.min.js"</span></code></pre></figure>

<p>After reloading and rerunning <code class="highlighter-rouge">fastOptJS</code>, this will create <code class="highlighter-rouge">scala-js-tutorial-jsdeps.js</code> containing all JavaScript
libraries next to the main JavaScript file. We can then simply include this file and don’t need to worry about
JavaScript libraries anymore:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- Include JavaScript dependencies --&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"./target/scala-2.12/scala-js-tutorial-jsdeps.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure>

<h3 id="setup-ui-in-scalajs">Setup UI in Scala.js</h3>

<p>We still want to get rid of the <code class="highlighter-rouge">onclick</code> attribute of our <code class="highlighter-rouge">&lt;button&gt;</code>. After removing the attribute, we add the
<code class="highlighter-rouge">setupUI</code> method, in which we use jQuery to add an event handler to the button. We also move the “Hello World” message
into this function.</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">def</span> <span class="n">setupUI</span><span class="o">()</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
  <span class="n">$</span><span class="o">(</span><span class="s">"body"</span><span class="o">).</span><span class="n">append</span><span class="o">(</span><span class="s">"&lt;p&gt;Hello World&lt;/p&gt;"</span><span class="o">)</span>
  <span class="n">$</span><span class="o">(</span><span class="s">"#click-me-button"</span><span class="o">).</span><span class="n">click</span><span class="o">(()</span> <span class="k">=&gt;</span> <span class="n">addClickedMessage</span><span class="o">())</span>
<span class="o">}</span></code></pre></figure>

<p>Since we do not call <code class="highlighter-rouge">addClickedMessage</code> from plain JavaScript anymore, we can remove the <code class="highlighter-rouge">@JSExportTopLevel</code> annotation (and the corresponding import).</p>

<p>Finally, we add a last call to <code class="highlighter-rouge">jQuery</code> in the main method, in order to execute <code class="highlighter-rouge">setupUI</code>, once the DOM is loaded:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">def</span> <span class="n">main</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
  <span class="n">$</span><span class="o">(()</span> <span class="k">=&gt;</span> <span class="n">setupUI</span><span class="o">())</span>
<span class="o">}</span></code></pre></figure>

<p>Again, since we are not calling <code class="highlighter-rouge">setupUI</code> directly from plain JavaScript, we do not need to export it (even though
jQuery will call it through that callback).</p>

<p>We now have an application whose UI is completely setup from within Scala.js. The next step will show how we can test
this application.</p>

<h2 id="-step-6-testing"><a name="testing"></a> Step 6: Testing</h2>

<p>In this section we will show how such an application can be tested using <a href="http://github.com/lihaoyi/utest">uTest</a>, a
tiny testing framework which compiles to both Scala.js and Scala JVM. As a note aside, this framework is also a good
choice to test libraries that cross compile. See our <a href="../../doc/project/cross-build.html">cross compilation guide</a> for
details.</p>

<h3 id="supporting-the-dom">Supporting the DOM</h3>

<p>Before we start writing tests which we will be able to run through the sbt console, we first have to solve another
issue. Remember the task <code class="highlighter-rouge">run</code>? If you try to invoke it now, you will see something like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; run
[info] Running tutorial.webapp.TutorialApp
[error] TypeError: (0 , $m_Lorg_scalajs_jquery_package$(...).jQuery$1) is not a function
[error]     at $c_Ltutorial_webapp_TutorialApp$.main__AT__V (.../TutorialApp.scala:9:11)
[error]     ...
[trace] Stack trace suppressed: run last compile:run for the full output.
[error] (compile:run) org.scalajs.jsenv.ExternalJSEnv$NonZeroExitException: Node.js exited with code 1
[error] Total time: 1 s, completed Oct 13, 2016 3:06:00 PM
</code></pre></div></div>

<p>What basically happens here is that jQuery (which is automatically included because of <code class="highlighter-rouge">jsDependencies</code>) cannot properly load, because there is no DOM available in Node.js.
To make the DOM available, add the following to your <code class="highlighter-rouge">build.sbt</code>:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="n">jsEnv</span> <span class="o">:=</span> <span class="k">new</span> <span class="n">org</span><span class="o">.</span><span class="n">scalajs</span><span class="o">.</span><span class="n">jsenv</span><span class="o">.</span><span class="n">jsdomnodejs</span><span class="o">.</span><span class="nc">JSDOMNodeJSEnv</span><span class="o">()</span></code></pre></figure>

<p>This will use the <a href="https://github.com/tmpvar/jsdom"><code class="highlighter-rouge">jsdom</code></a> library to simulate a DOM in Node.js.
Note that you need to install it separately using</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm install jsdom
</code></pre></div></div>

<p>After reloading, you can invoke <code class="highlighter-rouge">run</code> successfully:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; run
[info] Running tutorial.webapp.TutorialApp
[success] (...)
</code></pre></div></div>

<p>Alternatively to Node.js with jsdom, you can use <a href="http://phantomjs.org/">PhantomJS</a> or even <a href="http://docs.seleniumhq.org/">Selenium</a>.
You can find more information about this in the <a href="/doc/project/js-environments.html">documentation about JavaScript environments</a>.</p>

<h3 id="adding-utest">Adding uTest</h3>

<p>Using a testing framework in Scala.js is not much different than on the JVM.
It typically boils down to two sbt settings in the <code class="highlighter-rouge">build.sbt</code> file.
For uTest, these are:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"com.lihaoyi"</span> <span class="o">%%%</span> <span class="s">"utest"</span> <span class="o">%</span> <span class="s">"0.6.3"</span> <span class="o">%</span> <span class="s">"test"</span>
<span class="n">testFrameworks</span> <span class="o">+=</span> <span class="k">new</span> <span class="nc">TestFramework</span><span class="o">(</span><span class="s">"utest.runner.Framework"</span><span class="o">)</span></code></pre></figure>

<p>We are now ready to add a first simple test suite (<code class="highlighter-rouge">src/test/scala/tutorial/webapp/TutorialTest.scala</code>):</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">package</span> <span class="nn">tutorial.webapp</span>

<span class="k">import</span> <span class="nn">utest._</span>

<span class="k">import</span> <span class="nn">org.querki.jquery._</span>

<span class="k">object</span> <span class="nc">TutorialTest</span> <span class="k">extends</span> <span class="nc">TestSuite</span> <span class="o">{</span>

  <span class="c1">// Initialize App
</span>  <span class="nc">TutorialApp</span><span class="o">.</span><span class="n">setupUI</span><span class="o">()</span>

  <span class="k">def</span> <span class="n">tests</span> <span class="k">=</span> <span class="nc">Tests</span> <span class="o">{</span>
    <span class="ss">'HelloWorld </span><span class="o">-</span> <span class="o">{</span>
      <span class="n">assert</span><span class="o">(</span><span class="n">$</span><span class="o">(</span><span class="s">"p:contains('Hello World')"</span><span class="o">).</span><span class="n">length</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>This test uses jQuery to verify that our page contains exactly one <code class="highlighter-rouge">&lt;p&gt;</code> element which contains the text “Hello World”
after the UI has been set up.</p>

<p>To run this test, simply invoke the <code class="highlighter-rouge">test</code> task:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; test
[info] Compiling 1 Scala source to (...)/scalajs-tutorial/target/scala-2.12/test-classes...
[info] Fast optimizing (...)/scalajs-tutorial/target/scala-2.12/scala-js-tutorial-test-fastopt.js
-------------------------------- Running Tests --------------------------------
+ tutorial.webapp.TutorialTest.HelloWorld 2ms
Tests: 1, Passed: 1, Failed: 0
[success] Total time: 14 s, completed 16-mars-2018 20:04:28
</code></pre></div></div>

<p>We have successfully created a simple test.
Just like <code class="highlighter-rouge">run</code>, the <code class="highlighter-rouge">test</code> task uses Node.js to execute your tests.</p>

<h3 id="a-more-complex-test">A more complex test</h3>

<p>We also would like to test the functionality of our button. For this we face another small issue: the button doesn’t
exist when testing, since the tests start with an empty DOM tree. To solve this, we create the button in the <code class="highlighter-rouge">setupUI</code>
method and remove it from the HTML:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="n">$</span><span class="o">(</span><span class="s">"""&lt;button type="button"&gt;Click me!&lt;/button&gt;"""</span><span class="o">)</span>
  <span class="o">.</span><span class="n">click</span><span class="o">(()</span> <span class="k">=&gt;</span> <span class="n">addClickedMessage</span><span class="o">())</span>
  <span class="o">.</span><span class="n">appendTo</span><span class="o">(</span><span class="n">$</span><span class="o">(</span><span class="s">"body"</span><span class="o">))</span></code></pre></figure>

<p>This brings another unexpected advantage: We don’t need to give it an ID anymore but can directly use the jQuery object
to install the on-click handler.</p>

<p>We now define the <code class="highlighter-rouge">ButtonClick</code> test just below the <code class="highlighter-rouge">HelloWorld</code> test:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="ss">'ButtonClick </span><span class="o">-</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">messageCount</span> <span class="k">=</span>
    <span class="n">$</span><span class="o">(</span><span class="s">"p:contains('You clicked the button!')"</span><span class="o">).</span><span class="n">length</span>

  <span class="k">val</span> <span class="n">button</span> <span class="k">=</span> <span class="n">$</span><span class="o">(</span><span class="s">"button:contains('Click me!')"</span><span class="o">)</span>
  <span class="n">assert</span><span class="o">(</span><span class="n">button</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
  <span class="n">assert</span><span class="o">(</span><span class="n">messageCount</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>

  <span class="k">for</span> <span class="o">(</span><span class="n">c</span> <span class="k">&lt;-</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">5</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">button</span><span class="o">.</span><span class="n">click</span><span class="o">()</span>
    <span class="n">assert</span><span class="o">(</span><span class="n">messageCount</span> <span class="o">==</span> <span class="n">c</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>After defining a helper method that counts the number of messages, we retrieve the button from the DOM and verify we
have exactly one button and no messages. In the loop, we simulate a click on the button and then verify that the number
of messages has increased.</p>

<p>You can now call the <code class="highlighter-rouge">test</code> task again:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; test
[info] Compiling 1 Scala source to (...)/scalajs-tutorial/target/scala-2.12/test-classes...
[info] Fast optimizing (...)/scalajs-tutorial/target/scala-2.12/scala-js-tutorial-test-fastopt.js
-------------------------------- Running Tests --------------------------------
+ tutorial.webapp.TutorialTest.HelloWorld 3ms
+ tutorial.webapp.TutorialTest.ButtonClick 6ms
Tests: 2, Passed: 2, Failed: 0
[success] Total time: 15 s, completed 16-mars-2018 20:07:33
</code></pre></div></div>

<p>This completes the testing part of this tutorial.</p>

<h2 id="-step-7-optimizing-for-production"><a name="optimizing"></a> Step 7: Optimizing for Production</h2>

<p>Here we show a couple of things you might want to do when you promote your application to production.</p>

<h3 id="full-optimization">Full Optimization</h3>

<p>Size is critical for JavaScript code on the web. To compress the compiled code even further, the Scala.js sbt plugin
uses the advanced optimizations of the <a href="http://developers.google.com/closure/compiler/">Google Closure Compiler</a>. To run
full optimizations, simply use the <code class="highlighter-rouge">fullOptJS</code> task:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; fullOptJS
[info] Full optimizing (...)/scala-js-tutorial/target/scala-2.12/scala-js-tutorial-opt.js
[info] Closure: 0 error(s), 0 warning(s)
[success] (...)
</code></pre></div></div>

<p>Note that this can take a while on a larger project (tens of seconds), which is why we typically don’t use <code class="highlighter-rouge">fullOptJS</code>
during development, but <code class="highlighter-rouge">fastOptJS</code> instead. If you want to <code class="highlighter-rouge">run</code> and <code class="highlighter-rouge">test</code> the full-optimized version from sbt,
you need to change the <em>stage</em> using the following sbt setting:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; set scalaJSStage in Global := FullOptStage
</code></pre></div></div>

<p>(by default, the stage is <code class="highlighter-rouge">FastOptStage</code>)</p>

<p>We also need to create our final production HTML file <code class="highlighter-rouge">scalajs-tutorial.html</code> which includes the fully optimized code:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>The Scala.js Tutorial<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="c">&lt;!-- Include JavaScript dependencies --&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"./target/scala-2.12/scala-js-tutorial-jsdeps.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="c">&lt;!-- Include Scala.js compiled code --&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"./target/scala-2.12/scala-js-tutorial-opt.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<h3 id="compression">Compression</h3>

<p>If you serve your Scala.js application from a web server, you should additionally
gzip the resulting <code class="highlighter-rouge">.js</code> files. This step might reduce the size of your application down
to 20% of its original size.</p>

<p>The setup depends on your server stack. A common option is to use
<a href="https://github.com/sbt/sbt-web">sbt-web</a>,
<a href="https://github.com/vmunier/sbt-web-scalajs">sbt-web-scalajs</a> and
<a href="https://github.com/sbt/sbt-gzip">sbt-gzip</a>
if you have a Play or Akka-http server.</p>

<p>This completes the Scala.js tutorial. Refer to our <a href="../../doc/index.html">documentation page</a> for deeper insights into various
aspects of Scala.js.</p>

            <div class="spacing"></div>
        </div>
        <div class="col-md-3">
            <nav class="toc" role="navigation">
                
<ul>
    
    <li>
        <a href="scala-js-website/doc/">
            
            
            Introduction
            
        </a>
    </li>
    
    
    <li>
        <a href="scala-js-website/doc/tutorial/">
            
            
            Tutorials
            
        </a>
    </li>
    
      
<ul>
    
    <li>
        <a href="scala-js-website/doc/tutorial/basic/">
            
            
            <b>Basic tutorial</b>
            
        </a>
    </li>
    
    
</ul>

    
    
    <li>
        <a href="scala-js-website/doc/sjs-for-js/">
            
            
            Scala.js for JavaScript developers
            
        </a>
    </li>
    
      
<ul>
    
    <li>
        <a href="scala-js-website/doc/sjs-for-js/es6-to-scala-part1.html">
            
            
            From ES6 to Scala: Basics
            
        </a>
    </li>
    
    
    <li>
        <a href="scala-js-website/doc/sjs-for-js/es6-to-scala-part2.html">
            
            
            From ES6 to Scala: Collections
            
        </a>
    </li>
    
    
    <li>
        <a href="scala-js-website/doc/sjs-for-js/es6-to-scala-part3.html">
            
            
            From ES6 to Scala: Advanced
            
        </a>
    </li>
    
    
</ul>

    
    
    <li>
        <a href="scala-js-website/doc/project/">
            
            
            Project setup
            
        </a>
    </li>
    
      
<ul>
    
    <li>
        <a href="scala-js-website/doc/project/building.html">
            
            
            Building the application
            
        </a>
    </li>
    
    
    <li>
        <a href="scala-js-website/doc/project/dependencies.html">
            
            
            Dependencies
            
        </a>
    </li>
    
    
    <li>
        <a href="scala-js-website/doc/project/module.html">
            
            
            Emitting modules
            
        </a>
    </li>
    
    
    <li>
        <a href="scala-js-website/doc/project/js-environments.html">
            
            
            JavaScript Environments
            
        </a>
    </li>
    
    
    <li>
        <a href="scala-js-website/doc/project/cross-build.html">
            
            
            Cross-building
            
        </a>
    </li>
    
    
    <li>
        <a href="scala-js-website/doc/project/testing.html">
            
            
            Testing
            
        </a>
    </li>
    
    
</ul>

    
    
    <li>
        <a href="scala-js-website/doc/interoperability/">
            
            
            JavaScript interoperability
            
        </a>
    </li>
    
      
<ul>
    
    <li>
        <a href="scala-js-website/doc/interoperability/types.html">
            
            
            JavaScript types
            
        </a>
    </li>
    
    
    <li>
        <a href="scala-js-website/doc/interoperability/facade-types.html">
            
            
            Write facade types for JS APIs
            
        </a>
    </li>
    
    
    <li>
        <a href="scala-js-website/doc/interoperability/global-scope.html">
            
            
            Access to the JavaScript global scope (1.x only)
            
        </a>
    </li>
    
    
    <li>
        <a href="scala-js-website/doc/interoperability/export-to-javascript.html">
            
            
            Export Scala.js APIs
            
        </a>
    </li>
    
    
    <li>
        <a href="scala-js-website/doc/interoperability/sjs-defined-js-classes.html">
            
            
            Write JavaScript classes in Scala.js
            
        </a>
    </li>
    
    
    <li>
        <a href="scala-js-website/doc/interoperability/exceptions.html">
            
            
            Working with Exceptions
            
        </a>
    </li>
    
    
</ul>

    
    
    <li>
        <a href="scala-js-website/doc/api.html">
            
            
            Scala.js API
            
        </a>
    </li>
    
      
<ul>
    
    <li>
        <a href="scala-js-website/doc/all-api.html">
            
            
            APIs of previous versions
            
        </a>
    </li>
    
    
</ul>

    
    
    <li>
        <a href="scala-js-website/doc/semantics.html">
            
            
            Semantics of Scala.js
            
        </a>
    </li>
    
    
    <li>
        <a href="scala-js-website/doc/internals/">
            
            
            Internals
            
        </a>
    </li>
    
      
<ul>
    
    <li>
        <a href="scala-js-website/doc/internals/performance.html">
            
            
            Performance
            
        </a>
    </li>
    
    
    <li>
        <a href="scala-js-website/doc/internals/downloads.html">
            
            
            Standalone distribution
            
        </a>
    </li>
    
    
    <li>
        <a href="scala-js-website/doc/internals/version-history.html">
            
            
            Version history
            
        </a>
    </li>
    
    
</ul>

    
    
    <li>
        <a href="scala-js-website/doc/faq.html">
            
            
            FAQ
            
        </a>
    </li>
    
    
</ul>

            </nav>
        </div>
    </div>
</div>

    </div>
</div>
<div id="footerwrap">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <h4>LEARN</h4>

                <div class="hline-w"></div>
                <a class="grey-text text-lighten-3" href="scala-js-website/doc/">Documentation</a><br/>
                <a class="grey-text text-lighten-3" href="scala-js-website/tutorial/">Tutorial</a><br/>
                <a class="grey-text text-lighten-3" href="scala-js-website/doc/faq.html">FAQ</a>
            </div>
            <div class="col-md-4">
                <h4>COMMUNITY</h4>

                <div class="hline-w"></div>
                <a class="grey-text text-lighten-3" href="https://gitter.im/scala-js/scala-js">Gitter chat</a><br/>
                <a class="grey-text text-lighten-3" href="http://stackoverflow.com/questions/tagged/scala.js">Stackoverflow</a><br/>
                <a class="grey-text text-lighten-3" href="https://groups.google.com/forum/?fromgroups#!forum/scala-js">Mailing list</a><br/>
                <a class="grey-text text-lighten-3" href="http://twitter.com/scala_js">Twitter <i aria-hidden="true" class="fa fa-twitter"></i></a><br/>
                <a href="http://github.com/scala-js/scala-js">GitHub <i aria-hidden="true" class="fa fa-github"></i></a>
            </div>
            <div class="col-md-4">
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">
// delay loading of all JS assets only after first render
function downloadJSAtOnload() {
  var element = document.createElement("script");
  element.src = "scala-js-website/assets/bundle-9889fa9840f41fa2ac0f78fcdf8ed4ec89ec5f10123708d991b965a5cad032b1.js";
  document.body.appendChild(element);
}
if (window.addEventListener)
  window.addEventListener("load", downloadJSAtOnload, false);
else if (window.attachEvent)
  window.attachEvent("onload", downloadJSAtOnload);
else window.onload = downloadJSAtOnload;
</script>



</body>
</html>